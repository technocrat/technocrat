[
["the-subprime-mortgage-crisis-unfolds-in-early-2007-part-3.html", "5 The subprime mortgage crisis unfolds in early 2007, part 3 5.1 Selection bias", " 5 The subprime mortgage crisis unfolds in early 2007, part 3 Keywords: population, sub-population, implicit assumptions, stratification, logistic regression, odds ratio 5.1 Selection bias The most telling finding of this exploratory data analysis (aside from confirming that the 2006 vintage of subprime loans issued in the LBMLT series of transaction was, indeed poorly performing) is a lurking hidden assumption: Because the loans were all originated by the same organization and securitized in the same year, they collectively represent a population. Technically speaking, the loans are a population, a set of observations of individual loans of interest about which we are looking for associations between characteristics at origination and subsequent loan performance. For the most part we haven’t found any. 5.1.1 FICO, the light that failed In part 1, we looked at the distribution of FICO scores and saw that they were not normally distributed, and so were unlikely to have predictive value for loan performance, which itself was far from normally distributed. We should check that with regression. 5.1.1.1 Ordinary linear regression Because I coded loan performance into a 3-level scale (one or fewer non-payments, more than one, but not the three most recent, and the three most recent), perf is not a qualitative variable. Even if we substituted integers for the letter coding, we would have to deal with vexing questions: is the difference between one or fewer and more than one, but not last three missed payments, the same as more than one, including the three most recent? We can dodge this question, by making perf pseudo-quantitative, by setting one or fewer defaults to the integer 1 and the other two categories to the integer 0. And we must use logistic regression rather than ordinary linear regression, which can yield probabilities outside the range {0,1}. First, we need to collapse “A”, “B”, “C” performance categories into “A” = 1 (performing) and “B” &amp; “C” = 0 (non-performing). ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.2.1 ── ## ✔ ggplot2 3.0.0 ✔ purrr 0.2.5 ## ✔ tibble 1.4.2 ✔ dplyr 0.7.6 ## ✔ tidyr 0.8.1 ✔ stringr 1.3.1 ## ✔ readr 1.1.1 ✔ forcats 0.3.0 ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ── ## ✖ dplyr::filter() masks stats::filter() ## ✖ dplyr::lag() masks stats::lag() Now, we are ready to model the quantitative variable fico against the integer encoded qualitative variable perf using the generalized linear lineals function glm to perform logistic regression.’ Call: glm(formula = perf ~ fico, family = binomial, data = fp) Deviance Residuals: Min 1Q Median 3Q Max -0.1484 -0.1360 -0.1336 -0.1306 3.1440 Coefficients: Estimate Std. Error z value Pr(&gt;|z|) (Intercept) -3.9120970 0.4059923 -9.636 &lt;2e-16 ** fico -0.0012708 0.0006423 -1.979 0.0479 — Signif. codes: 0 ‘’ 0.001 ’’ 0.01 ’’ 0.05 ‘.’ 0.1 ‘’ 1 (Dispersion parameter for binomial family taken to be 1) Null deviance: 9768.4 on 96144 degrees of freedom Residual deviance: 9764.5 on 96143 degrees of freedom AIC: 9768.5 Number of Fisher Scoring iterations: 7 (I also ran the model with standardized fico and binning into increments of 5 points with substantially the same output.) The good news about the model run is that its results have a p-value &lt; 0.05. However, unlike linear regression, which gives us adjusted R squared to show the proportion of variance that the independent variable accounts for, we need to go further in logistic regression to get an idea of how useful the output is. The bad news is that fico has miniscule predictive usefulness; for every point increase in fico, the odds ratio of a loan being in performing status changes by -0.0012708 in a negative direction. We can even put confidence intervals around this. ## Waiting for profiling to be done... 2.5 % 97.5 % (Intercept) -4.709279081 -3.117820e+00 fico -0.002530868 -1.316035e-05 What if we turn the question around to ask whether fico has an association with the portion of non-performing loans that were in default status at the latest report. Recall that the loans has been bucketed into “A” (one or fewer missed payments), “B” (more than one but current as of the latest report) an “C” (in default, three payments down as of the latest report). To repose the question, all that is required is to redefine a function from # function to collapse &quot;A&quot;, &quot;B&quot;, &quot;C&quot; performance categories into # A = 1 (performing) and B &amp; C = 0 (non-performing) cat2int &lt;- function (x) {ifelse (x == &quot;A&quot;, 1, 0)} to # function to collapse &quot;A&quot;, &quot;B&quot;, &quot;C&quot; performance categories into # A &amp; B = 1 (non-defaulted) and C = 0 (defaulted) cat2int_d &lt;- function (x) {ifelse (x == &quot;C&quot;, 0, 1)} Call: glm(formula = perf ~ fico, family = “binomial”, data = fp) Deviance Residuals: Min 1Q Median 3Q Max -2.0501 0.5142 0.5155 0.5164 0.5200 Coefficients: Estimate Std. Error z value Pr(&gt;|z|) (Intercept) 1.8806399 0.1156557 16.261 &lt;2e-16 *** fico 0.0001102 0.0001820 0.605 0.545 — Signif. codes: 0 ‘’ 0.001 ’’ 0.01 ’’ 0.05 ‘.’ 0.1 ‘’ 1 (Dispersion parameter for binomial family taken to be 1) Null deviance: 72266 on 96144 degrees of freedom Residual deviance: 72265 on 96143 degrees of freedom AIC: 72269 Number of Fisher Scoring iterations: 4 Here, the utility of fico has completely vanished. The p-value shows that. 5.1.2 Next steps We could continue to add variables to the logistic regression or we can stratify the population. "]
]
