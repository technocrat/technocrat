<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Data Science Portfolio</title>
  <meta name="description" content="Landing site">
  <meta name="generator" content="bookdown 0.7.10 and GitBook 2.6.7">

  <meta property="og:title" content="Data Science Portfolio" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Landing site" />
  <meta name="github-repo" content="github/technocrat/technocrat.github.io" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Data Science Portfolio" />
  
  <meta name="twitter:description" content="Landing site" />
  

<meta name="author" content="Richard Careaga">


<meta name="date" content="2018-07-06">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html">
<link rel="next" href="the-enron-email-corpus.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/kePrint-0.0.1/kePrint.js"></script>



</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Purpose</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#updates"><i class="fa fa-check"></i><b>1.1</b> Updates</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#literate-programming-the-tight-integration-of-code-and-text"><i class="fa fa-check"></i><b>1.2</b> Literate programming: the tight integration of code and text</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#background"><i class="fa fa-check"></i><b>1.3</b> Background</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#the-cases"><i class="fa fa-check"></i><b>1.4</b> The Cases</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#current-credentials"><i class="fa fa-check"></i><b>1.5</b> Current Credentials</a><ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#graduate-school-level"><i class="fa fa-check"></i><b>1.5.1</b> Graduate school level</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#undergraduate-level"><i class="fa fa-check"></i><b>1.5.2</b> Undergraduate level</a></li>
<li class="chapter" data-level="1.5.3" data-path="index.html"><a href="index.html#prior-analytic-and-programming-experience"><i class="fa fa-check"></i><b>1.5.3</b> Prior analytic and programming experience</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="counted.html"><a href="counted.html"><i class="fa fa-check"></i><b>2</b> 2015 Police Involved Homicides</a><ul>
<li class="chapter" data-level="2.1" data-path="counted.html"><a href="counted.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="counted.html"><a href="counted.html#the-data"><i class="fa fa-check"></i><b>2.2</b> The Data</a></li>
<li class="chapter" data-level="2.3" data-path="counted.html"><a href="counted.html#tabular-summary-of-the-data"><i class="fa fa-check"></i><b>2.3</b> Tabular summary of the data</a><ul>
<li class="chapter" data-level="2.3.1" data-path="counted.html"><a href="counted.html#gender"><i class="fa fa-check"></i><b>2.3.1</b> Gender</a></li>
<li class="chapter" data-level="2.3.2" data-path="counted.html"><a href="counted.html#raceethnicity"><i class="fa fa-check"></i><b>2.3.2</b> Race/Ethnicity</a></li>
<li class="chapter" data-level="2.3.3" data-path="counted.html"><a href="counted.html#age"><i class="fa fa-check"></i><b>2.3.3</b> Age</a></li>
<li class="chapter" data-level="2.3.4" data-path="counted.html"><a href="counted.html#cause-of-death"><i class="fa fa-check"></i><b>2.3.4</b> Cause of Death</a></li>
<li class="chapter" data-level="2.3.5" data-path="counted.html"><a href="counted.html#whether-and-how-civilians-were-armed"><i class="fa fa-check"></i><b>2.3.5</b> Whether and how civilians were armed</a></li>
<li class="chapter" data-level="2.3.6" data-path="counted.html"><a href="counted.html#location"><i class="fa fa-check"></i><b>2.3.6</b> Location</a></li>
<li class="chapter" data-level="2.3.7" data-path="counted.html"><a href="counted.html#months-and-days-of-death"><i class="fa fa-check"></i><b>2.3.7</b> Months and Days of Death</a></li>
<li class="chapter" data-level="2.3.8" data-path="counted.html"><a href="counted.html#cause-of-death-and-civilian-armed-status"><i class="fa fa-check"></i><b>2.3.8</b> Cause of Death and Civilian Armed Status</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="counted.html"><a href="counted.html#geographic-analysis-of-the-data"><i class="fa fa-check"></i><b>2.4</b> Geographic Analysis of the Data</a><ul>
<li class="chapter" data-level="2.4.1" data-path="counted.html"><a href="counted.html#many-datasets-are-distributed-similarly-to-population"><i class="fa fa-check"></i><b>2.4.1</b> Many Datasets are Distributed Similarly to Population</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="counted.html"><a href="counted.html#what-conclusions-can-we-draw-from-the-short-national-summary"><i class="fa fa-check"></i><b>2.5</b> What conclusions can we draw from the short, national summary?</a><ul>
<li class="chapter" data-level="2.5.1" data-path="counted.html"><a href="counted.html#detail-underlying-deaths-of-women"><i class="fa fa-check"></i><b>2.5.1</b> Detail underlying deaths of women</a></li>
<li class="chapter" data-level="2.5.2" data-path="counted.html"><a href="counted.html#cautionary-example"><i class="fa fa-check"></i><b>2.5.2</b> Cautionary Example</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="counted.html"><a href="counted.html#next-steps"><i class="fa fa-check"></i><b>2.6</b> Next steps</a><ul>
<li class="chapter" data-level="2.6.1" data-path="counted.html"><a href="counted.html#finer-geographic-detail"><i class="fa fa-check"></i><b>2.6.1</b> Finer geographic detail</a></li>
<li class="chapter" data-level="2.6.2" data-path="counted.html"><a href="counted.html#testing-hypotheses"><i class="fa fa-check"></i><b>2.6.2</b> Testing hypotheses</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dectab.html"><a href="dectab.html"><i class="fa fa-check"></i><b>3</b> The Financial Cash Flow Model: Python on Wall Street</a><ul>
<li class="chapter" data-level="3.1" data-path="dectab.html"><a href="dectab.html#case-description"><i class="fa fa-check"></i><b>3.1</b> Case Description</a></li>
<li class="chapter" data-level="3.2" data-path="dectab.html"><a href="dectab.html#xml-conversion"><i class="fa fa-check"></i><b>3.2</b> XML Conversion</a></li>
<li class="chapter" data-level="3.3" data-path="dectab.html"><a href="dectab.html#from-xml-to-plain-text"><i class="fa fa-check"></i><b>3.3</b> From XML to Plain Text</a></li>
<li class="chapter" data-level="3.4" data-path="dectab.html"><a href="dectab.html#proof-of-concept-summary-fico-statistics"><i class="fa fa-check"></i><b>3.4</b> Proof of Concept, Summary FICO Statistics</a></li>
<li class="chapter" data-level="3.5" data-path="dectab.html"><a href="dectab.html#the-cash-flow-model"><i class="fa fa-check"></i><b>3.5</b> The Cash Flow Model</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html"><i class="fa fa-check"></i><b>4</b> The subprime mortgage crisis unfolds in early 2007, part 1</a><ul>
<li class="chapter" data-level="4.1" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html#case-description-1"><i class="fa fa-check"></i><b>4.1</b> Case Description</a></li>
<li class="chapter" data-level="4.2" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html#data-wrangling"><i class="fa fa-check"></i><b>4.2</b> Data Wrangling</a></li>
<li class="chapter" data-level="4.3" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html#database-conversion"><i class="fa fa-check"></i><b>4.3</b> Database conversion</a></li>
<li class="chapter" data-level="4.4" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html#preliminary-analysis-based-on-fico-scores"><i class="fa fa-check"></i><b>4.4</b> Preliminary analysis, based on FICO scores</a><ul>
<li class="chapter" data-level="4.4.1" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html#ficos-importance"><i class="fa fa-check"></i><b>4.4.1</b> FICO’s importance</a></li>
<li class="chapter" data-level="4.4.2" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html#fico-scores-in-the-2006-loan-pool"><i class="fa fa-check"></i><b>4.4.2</b> FICO scores in the 2006 loan pool</a></li>
<li class="chapter" data-level="4.4.3" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html#the-fico-scores-are-not-normally-distributed"><i class="fa fa-check"></i><b>4.4.3</b> The FICO scores are not normally distributed</a></li>
<li class="chapter" data-level="4.4.4" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html#possible-strategies-to-deal-with-the-issues"><i class="fa fa-check"></i><b>4.4.4</b> Possible strategies to deal with the issues</a></li>
<li class="chapter" data-level="4.4.5" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html#reduced-data-set"><i class="fa fa-check"></i><b>4.4.5</b> Reduced data set</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html#results-at-this-point"><i class="fa fa-check"></i><b>4.5</b> Results at this point</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html"><i class="fa fa-check"></i><b>5</b> The subprime mortgage crisis unfolds in early 2007, part 2</a><ul>
<li class="chapter" data-level="5.1" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html#the-fall-of-fico"><i class="fa fa-check"></i><b>5.1</b> The fall of FICO</a></li>
<li class="chapter" data-level="5.2" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html#restructuring-the-data"><i class="fa fa-check"></i><b>5.2</b> Restructuring the data</a></li>
<li class="chapter" data-level="5.3" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html#principal-component-analysis"><i class="fa fa-check"></i><b>5.3</b> Principal component analysis</a></li>
<li class="chapter" data-level="5.4" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html#k-means-clustering"><i class="fa fa-check"></i><b>5.4</b> K-means clustering</a><ul>
<li class="chapter" data-level="5.4.1" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html#housekeeping"><i class="fa fa-check"></i><b>5.4.1</b> Housekeeping</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html#do-the-clusters-predict-loan-performance"><i class="fa fa-check"></i><b>5.5</b> Do the clusters predict loan performance?</a><ul>
<li class="chapter" data-level="5.5.1" data-path="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html"><a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2.html#correspondence-analysis"><i class="fa fa-check"></i><b>5.5.1</b> Correspondence analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html"><i class="fa fa-check"></i><b>6</b> The Enron Email Corpus</a><ul>
<li class="chapter" data-level="6.1" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#case-description-2"><i class="fa fa-check"></i><b>6.1</b> Case Description</a></li>
<li class="chapter" data-level="6.2" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#data-preparation"><i class="fa fa-check"></i><b>6.2</b> Data preparation</a><ul>
<li class="chapter" data-level="6.2.1" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#preparation"><i class="fa fa-check"></i><b>6.2.1</b> Preparation</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#strategy-for-exploration"><i class="fa fa-check"></i><b>6.3</b> Strategy for exploration</a><ul>
<li class="chapter" data-level="6.3.1" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#dont-look-for-much-from-the-big-shots"><i class="fa fa-check"></i><b>6.3.1</b> Don’t look for much from the big shots</a></li>
<li class="chapter" data-level="6.3.2" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#volume-is-not-evenly-distributed-among-users"><i class="fa fa-check"></i><b>6.3.2</b> Volume is not evenly distributed among users</a></li>
<li class="chapter" data-level="6.3.3" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#keywords-may-not-help-much"><i class="fa fa-check"></i><b>6.3.3</b> Keywords may not help much</a></li>
<li class="chapter" data-level="6.3.4" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#dont-neglect-time-series"><i class="fa fa-check"></i><b>6.3.4</b> Don’t neglect time series</a></li>
<li class="chapter" data-level="6.3.5" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#avoid-the-echo-chamber"><i class="fa fa-check"></i><b>6.3.5</b> Avoid the echo chamber</a></li>
<li class="chapter" data-level="6.3.6" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#the-real-value-proposition"><i class="fa fa-check"></i><b>6.3.6</b> The REAL value proposition</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#some-preliminary-results"><i class="fa fa-check"></i><b>6.4</b> Some preliminary results</a><ul>
<li class="chapter" data-level="6.4.1" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#unique-senders"><i class="fa fa-check"></i><b>6.4.1</b> Unique senders</a></li>
<li class="chapter" data-level="6.4.2" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#unique-receivers"><i class="fa fa-check"></i><b>6.4.2</b> Unique receivers</a></li>
<li class="chapter" data-level="6.4.3" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#senders-who-are-also-receivers"><i class="fa fa-check"></i><b>6.4.3</b> Senders who are also receivers</a></li>
<li class="chapter" data-level="6.4.4" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#senderreceivers-with-enron-addresses"><i class="fa fa-check"></i><b>6.4.4</b> Sender/receivers with Enron addresses</a></li>
<li class="chapter" data-level="6.4.5" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#subject-line-words"><i class="fa fa-check"></i><b>6.4.5</b> Subject line words</a></li>
<li class="chapter" data-level="6.4.6" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#places-mentioned"><i class="fa fa-check"></i><b>6.4.6</b> Places mentioned</a></li>
<li class="chapter" data-level="6.4.7" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#periodicity"><i class="fa fa-check"></i><b>6.4.7</b> Periodicity</a></li>
<li class="chapter" data-level="6.4.8" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#social-networks"><i class="fa fa-check"></i><b>6.4.8</b> Social Networks</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="the-enron-email-corpus.html"><a href="the-enron-email-corpus.html#future-work"><i class="fa fa-check"></i><b>6.5</b> Future work</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="daycare.html"><a href="daycare.html"><i class="fa fa-check"></i><b>7</b> Daycare Costs and Unexamined Assumptions</a><ul>
<li class="chapter" data-level="7.1" data-path="daycare.html"><a href="daycare.html#case-description-3"><i class="fa fa-check"></i><b>7.1</b> Case Description</a></li>
<li class="chapter" data-level="7.2" data-path="daycare.html"><a href="daycare.html#with-the-right-metrics"><i class="fa fa-check"></i><b>7.2</b> With the right metrics</a></li>
<li class="chapter" data-level="7.3" data-path="daycare.html"><a href="daycare.html#takeaway"><i class="fa fa-check"></i><b>7.3</b> Takeaway</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="assorted-examples-of-toolmaking.html"><a href="assorted-examples-of-toolmaking.html"><i class="fa fa-check"></i><b>8</b> Assorted Examples of Toolmaking</a><ul>
<li class="chapter" data-level="8.1" data-path="assorted-examples-of-toolmaking.html"><a href="assorted-examples-of-toolmaking.html#the-short-genome-file-day-to-day-python"><i class="fa fa-check"></i><b>8.1</b> The Short Genome File: Day-to-Day Python</a><ul>
<li class="chapter" data-level="8.1.1" data-path="assorted-examples-of-toolmaking.html"><a href="assorted-examples-of-toolmaking.html#case-description-4"><i class="fa fa-check"></i><b>8.1.1</b> Case Description</a></li>
<li class="chapter" data-level="8.1.2" data-path="assorted-examples-of-toolmaking.html"><a href="assorted-examples-of-toolmaking.html#conversion-problem"><i class="fa fa-check"></i><b>8.1.2</b> Conversion Problem</a></li>
<li class="chapter" data-level="8.1.3" data-path="assorted-examples-of-toolmaking.html"><a href="assorted-examples-of-toolmaking.html#everyday-solution"><i class="fa fa-check"></i><b>8.1.3</b> Everyday Solution</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="assorted-examples-of-toolmaking.html"><a href="assorted-examples-of-toolmaking.html#hard-but-simple-parsing-yaml-files-in-haskell"><i class="fa fa-check"></i><b>8.2</b> Hard but simple – parsing YAML files in Haskell</a></li>
<li class="chapter" data-level="8.3" data-path="assorted-examples-of-toolmaking.html"><a href="assorted-examples-of-toolmaking.html#contextual-awareness"><i class="fa fa-check"></i><b>8.3</b> Contextual Awareness</a></li>
<li class="chapter" data-level="8.4" data-path="assorted-examples-of-toolmaking.html"><a href="assorted-examples-of-toolmaking.html#minimalism-throws-you-into-the-pool"><i class="fa fa-check"></i><b>8.4</b> Minimalism Throws You into the Pool</a></li>
<li class="chapter" data-level="8.5" data-path="assorted-examples-of-toolmaking.html"><a href="assorted-examples-of-toolmaking.html#parsing-system-date-strings-into-python-datetime-objects"><i class="fa fa-check"></i><b>8.5</b> Parsing system date strings into Python datetime objects</a></li>
<li class="chapter" data-level="8.6" data-path="assorted-examples-of-toolmaking.html"><a href="assorted-examples-of-toolmaking.html#combination-of-k-items-taken-n-at-a-time"><i class="fa fa-check"></i><b>8.6</b> Combination of k items, taken n at a time</a></li>
<li class="chapter" data-level="8.7" data-path="assorted-examples-of-toolmaking.html"><a href="assorted-examples-of-toolmaking.html#flexbison-to-compile-data-parser-for-june-20-2018-form"><i class="fa fa-check"></i><b>8.7</b> Flex/Bison to compile data parser for June 20, 2018 form</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science Portfolio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-2" class="section level1">
<h1><span class="header-section-number">5</span> The subprime mortgage crisis unfolds in early 2007, part 2</h1>
<p>Keywords: refactoring, unsupervised learning, principal component analysis, k-means clustering, correspondence analysis, chi-squared test, contingency table, pivot, correlation table</p>
<div id="the-fall-of-fico" class="section level2">
<h2><span class="header-section-number">5.1</span> The fall of FICO</h2>
<p>The problem with the conventional wisdom of long standing is that it loses sight of history. The prominence of FICO in home loan credit underwriting described in the <a href="https://democrats-oversight.house.gov/sites/democrats.oversight.house.gov/files/documents/Fannie%20Freddie%20Testimony%20of%20Edward%20Pinto%2012.9.08%20written%20submission%20Full.pdf">Pinto Testimony</a> had its origins in a different time (the early 1990s) and a different lending environment. Freddie Mac was in a good position to ensure that all other things <em>were</em> equal. It made only what came to be called “prime” loans, generally for no more than 80% of the value of the property, under more stringent limitations on the debt-to-income ratio of the borrower and many other criteria that it kept within a narrow range, and offered only a few varieties of loans.</p>
<p>In the subprime market that emerged in the late 90s, all of those factors changed. Criteria that were narrow became broad, documentation was relaxed and a widespread assumption was that continually rising home values would preclude any problems. It’s not surprising that FICO lost its predictive power.</p>
</div>
<div id="restructuring-the-data" class="section level2">
<h2><span class="header-section-number">5.2</span> Restructuring the data</h2>
<p>Some of the testing of FICO as a useful metric involved subsetting the data. There were many more variables than the ones used, some of them categorical and some categorical coded as numeric. One potentially useful variable is location, because we know that real estate value are location sensitive. We have four location fields in the database, all derived from the postal zip code:</p>
<ul>
<li><p>The zip code itself, which is generally either much smaller or much larger than the real estate market, and also changes at the convenience of the postal service. <em>See</em> the discussion at [On the use of ZIP codes and ZIP code tabulation areas (ZCTAs) for the spatial analysis of epidemiological data].</p></li>
<li><p>The metropolitan area derived from the U.S. Census ZIP code tabulation area, but covers a larger area than most real estate markets</p></li>
<li><p>Longitude and latitude dervived from the ZCTA’s, used for mapping</p></li>
</ul>
<p>As a compromise, I converted the 5-digit zip codes into 3-digit zip codes. In metropolitan areas, the 3-digit codes are the sizes comparable to how the multiple listing services divide the market. We’ll see if there is any value in this proxy measure of real estate market.</p>
<p>It was time to reorganize the database into a more streamlined version, that captured the information on performance (relieving the 11-month constraint) and transformed the fields that needed to be treated as categorical, rather than continuous. It’s much more efficient to put this in a new SQL table than to keep in memory, especially since sampling will be involved. Here’s the revised data layout:</p>
<pre><code>MariaDB [dlf]&gt; describe loans;
+-----------+--------+------+-----+---------+-------+
| Field     | Type   | Null | Key | Default | Extra |
+-----------+--------+------+-----+---------+-------+
| row_names | text   | YES  |     | NULL    |       |
| ctapeno   | double | YES  |     | NULL    |       |
| deal      | text   | YES  |     | NULL    |       |
| fico      | double | YES  |     | NULL    |       |
| dti       | double | YES  |     | NULL    |       |
| cltv      | double | YES  |     | NULL    |       |
| obal      | double | YES  |     | NULL    |       |
| orate     | double | YES  |     | NULL    |       |
| grade     | text   | YES  |     | NULL    |       |
| dtype     | text   | YES  |     | NULL    |       |
| fpd       | text   | YES  |     | NULL    |       |
| ltype     | text   | YES  |     | NULL    |       |
| pmiflag   | text   | YES  |     | NULL    |       |
| ppp       | text   | YES  |     | NULL    |       |
| otype     | text   | YES  |     | NULL    |       |
| purpose   | text   | YES  |     | NULL    |       |
| ptype     | text   | YES  |     | NULL    |       |
| zip       | text   | YES  |     | NULL    |       |
| perf      | text   | YES  |     | NULL    |       |
+-----------+--------+------+-----+---------+-------+
19 rows in set (0.00 sec)</code></pre>
<p>Between the first two rows (record identifiers) and the last row (the performance category) are the 17 variables we have to predict the performance outcome. For the almost 100,000 records, that is 1.7 million pieces of information. Technically we are in 17-dimensional space, and we need a way of flattening the dimensionality to be able to question the data.</p>
</div>
<div id="principal-component-analysis" class="section level2">
<h2><span class="header-section-number">5.3</span> Principal component analysis</h2>
<p><img src="_main_files/figure-html/psa1-1.png" width="672" /></p>
<p>The cumulative variance is 0.253, 0.497, 0.708, 0.858, 1 for this sample of 300.</p>
<p>From the loadings chart on the right, we see that <em>obal</em> (the original amount of the loan) and <em>orate</em> (the original rate of interest) are negatively correlated, -0.451. The remaining continuous variables, <em>fico</em>, <em>dti</em> (debt-to-income ratio), <em>cltv</em> (the ratio of first and second loans to the value of the mortgaged property), have small correlations:</p>
<p>The variables <em>fico</em> and <em>cltv</em> have some correlation (0.295), while <em>fico</em> and <em>dti</em> (-0.036) and <em>dti</em> and <em>cltv</em> (0.121) have low correlations.</p>
<p>The variable <em>orate,</em> however, is clearly discrete, so we re-run without it and increase the size of the sample to 9,000.</p>
<p><img src="_main_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>The variances are [1] 0.2875106 0.2654761 0.2497528 0.1972605</p>
</div>
<div id="k-means-clustering" class="section level2">
<h2><span class="header-section-number">5.4</span> K-means clustering</h2>
<p>The following represents the unsupervised classification of the <em>fico, cltv, obal</em>, and <em>dti</em> of an approximately 10% sample from the <strong>loans</strong> dataset.</p>
<p><img src="_main_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Using the entire population, rather than a sample creates somewhat better defined clusters</p>
<div class="figure">
<img src="http://media.richard-careaga.com/img/Kmeans_loans.png" alt="K-means clustering of all loans in loans database" />
<p class="caption">K-means clustering of all loans in loans database</p>
</div>
<p>Consideration might be given to separately clustering high-balance loans. Other outliers, such as the zero FICO scores, can be safely ignored, as can be the anomalous loan with a 97% <em>dti</em> ratio.</p>
<div id="housekeeping" class="section level3">
<h3><span class="header-section-number">5.4.1</span> Housekeeping</h3>
<p>Since PCA is a relatively expensive calculation for 100K records, I saved the result to and Rda file for reuse. Now, I’ll add it to the loans database as another categorical variable.</p>
<p>Because I don’t run the MySQL server with rollback and to avoid a proliferation of names</p>
<pre><code>MariaDB [dlf]&gt; CREATE TABLE loans_bak AS SELECT * from loans;
Query OK, 96147 rows affected (1.06 sec)
Records: 96147  Duplicates: 0  Warnings: 0</code></pre>
<p>The strategy is to create df loans w/all fields and cbind cs.k$clusters, renam “value” to kcluster and write back to loans, after dropping it</p>
<pre><code>dbWriteTable(con, &quot;loans&quot;, cs)</code></pre>
<p>Here’s the code (not run, to avoid churn)</p>
<pre><code>library(tidyverse)
library(DBI)
library(RMySQL)
library(FactoMineR)

drv &lt;- dbDriver(&quot;MySQL&quot;)
con &lt;- dbConnect(drv, username=&quot;root&quot;, password=&quot;&quot;, dbname =&quot;dlf&quot;, host=&quot;localhost&quot;)
res &lt;- dbGetQuery(con, &quot;SELECT * from loans_bak&quot;)
cs &lt;- as.tibble(res)
load(&quot;data/kmeans_loans.Rda&quot;) # brings in cs.k
#check for missing values
nrow(cs) == length(cs.k$cluster)
# convert to data frame
csk &lt;- as.tibble(cs.k$cluster)
# rename the column
csk &lt;- csk %&gt;% transmute(kcluster = value)
# combine
loans &lt;- bind_cols(cs,csk)
# remove duplicate rownames column
loans &lt;- loans[-1]
# write back to SQL
#dbWriteTable(con, &quot;loans&quot;, loans) 
# test
#dbGetQuery(con, &quot;SELECT * from loans limit 25&quot;)</code></pre>
</div>
</div>
<div id="do-the-clusters-predict-loan-performance" class="section level2">
<h2><span class="header-section-number">5.5</span> Do the clusters predict loan performance?</h2>
<p>We previously classified loans in the pool based on payment history into three categories:</p>
<ul>
<li>A: no more than 1 missed payment during the life of the loan</li>
<li>B: more than 1 missed payment during the life of the loan but current in the most recent report</li>
<li>C: delinquent at least three times as of the most recent three payment reports</li>
</ul>
<p>Do the three principal components of the numeric variables, <em>obal</em>, <em>orate</em>, <em>dti</em> and <em>cltv</em> have an association with the payment categories?</p>
<p>If they do, we have the makings of a model; otherwise, we need to look at the other data available.</p>
<div id="correspondence-analysis" class="section level3">
<h3><span class="header-section-number">5.5.1</span> Correspondence analysis</h3>
<p>Principal component analysis and many other data tools work only on continuous data; for discrete (or categorical) values, we turn to contingency tables, where one variable is in the rows and the other in the columns, so this is sometimes called an <em>r x c</em> table.</p>
<p>I’ll use three 10% samples to check if the results are consistent. The idea is to see if the porportion of results are <em>independent.</em> In formal terms, that will be the null hypothosis. The test statistic is the chi-square test of independence. I’ll use the conventional <em>p-value</em> of 0.05 as the cutoff; anything less than that means that I cannot reject the null hypothesis that the performance categories and the factors are independent. Here are the contingency tables:</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:contab">Table 5.1: </span>Sample 1 contingency table of performance (row) by cluster (column)
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
1
</th>
<th style="text-align:right;">
2
</th>
<th style="text-align:right;">
3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:right;">
37
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
2,340
</td>
<td style="text-align:right;">
4,672
</td>
<td style="text-align:right;">
829
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:right;">
322
</td>
<td style="text-align:right;">
645
</td>
<td style="text-align:right;">
108
</td>
</tr>
</tbody>
</table>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:contab">Table 5.1: </span>Sample 2 contingency table of performance (row) by cluster (column)
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
1
</th>
<th style="text-align:right;">
2
</th>
<th style="text-align:right;">
3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
2,414
</td>
<td style="text-align:right;">
4,548
</td>
<td style="text-align:right;">
825
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:right;">
350
</td>
<td style="text-align:right;">
667
</td>
<td style="text-align:right;">
107
</td>
</tr>
</tbody>
</table>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:contab">Table 5.1: </span>Sample 3 contingency table of performance (row) by cluster (column)
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
1
</th>
<th style="text-align:right;">
2
</th>
<th style="text-align:right;">
3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
2,493
</td>
<td style="text-align:right;">
4,574
</td>
<td style="text-align:right;">
783
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:right;">
322
</td>
<td style="text-align:right;">
624
</td>
<td style="text-align:right;">
127
</td>
</tr>
</tbody>
</table>
<p>and the chi-square tests are consistent.</p>
<p>[1] “Sample 1 chi square test for independence”</p>
<pre><code>Pearson&#39;s Chi-squared test</code></pre>
<p>data: table(s1) X-squared = 16.61, df = 4, p-value = 0.0023</p>
<p>[1] “Sample 2 chi square test for independence”</p>
<pre><code>Pearson&#39;s Chi-squared test</code></pre>
<p>data: table(s2) X-squared = 41.977, df = 4, p-value = 1.687e-08</p>
<p>[1] “Sample 3 chi square test for independence”</p>
<pre><code>Pearson&#39;s Chi-squared test</code></pre>
<p>data: table(s3) X-squared = 14.77, df = 4, p-value = 0.005203</p>
<p>The chi square test doesn’t allow us to conclude that the loan performance and PCA-dervived clusters are not independent. Put more plainly, the one seems to have nothing to do with the other.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-subprime-mortgage-crisis-unfolds-in-early-2007-part-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="the-enron-email-corpus.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
